<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Настройки</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
    <h2>⚙️ Настройки</h2>
    <div class="field-group">
        <label for="apiServiceUrl">API URL сервиса ИИ:</label>
        <input type="url" id="apiServiceUrl" placeholder="напр, https://api.openai.com/v1/chat/completions">
        <button id="checkEndpoint" type="button" style="margin-top:12px;">Проверить подключение</button>
        <div id="endpointStatus" style="margin-top:8px;"></div>
    </div>
    
    <div class="field-group">
        <label for="apiKey">API ключ:</label>
        <input type="password" id="apiKey" placeholder="Ваш API ключ сервиса ИИ">
        <p class="note">⚠️ <strong>Внимание:</strong> API ключи хранятся локально в незашифрованном виде.</p>
    </div>
    
    <div class="field-group">
        <label for="modelName">Модель:</label>
        <select id="modelSelector" style="margin-bottom:8px;"></select>
        <input type="text" id="modelName" placeholder="напр, gpt-4 или THUDM/glm-4-9b-chat">
        <div id="modelStatus" style="margin-top:8px;"></div>
    </div>

    <div class="field-group">
        <label for="maxPromptLength">Максимальная длина промпта (символов):</label>
        <input type="number" id="maxPromptLength" value="70000">
    </div>

    <div class="field-group">
        <label for="requestTimeout">Таймаут запроса (секунд):</label>
        <input type="number" id="requestTimeout" value="60">
    </div>

    <div class="field-group">
        <label for="templateSelector">Шаблон промпта:</label>
        <div class="template-selector-group">
            <select id="templateSelector">
                <option value="custom">Пользовательский шаблон</option>
                <option value="template1">Базовый XPath шаблон</option>
                <option value="template2">Продвинутый XPath шаблон</option>
                <option value="template3">Компактный XPath шаблон</option>
                <option value="template4">XPath с атрибутами</option>
                <option value="template5">Экспертный XPath шаблон</option>
            </select>
            <div class="template-description" id="templateDescription"></div>
        </div>
        <label for="defaultPromptTemplate">Содержимое шаблона промпта:</label>
        <textarea id="defaultPromptTemplate" rows="15"></textarea>
        <p class="note">Используйте {element} для HTML выбранного элемента и {dom} для очищенного DOM страницы.</p>
    </div>
    <button id="saveSettings">Сохранить настройки</button>
    <div id="status"></div>

    <script src="options.js"></script>
</body>
</html>
